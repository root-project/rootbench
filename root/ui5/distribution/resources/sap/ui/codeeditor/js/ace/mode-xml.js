ace.define("ace/mode/xml_highlight_rules",[],function(r,e,m){"use strict";var o=r("../lib/oop");var T=r("./text_highlight_rules").TextHighlightRules;var X=function(n){var t="[_:a-zA-Z\xc0-\uffff][-_:.a-zA-Z0-9\xc0-\uffff]*";this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)("+t+")",next:"processing_instruction"},{token:"comment.start.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:true},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],processing_instruction:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:t},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)("+t+")",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.end.xml",regex:"-->",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:"+t+":)?"+t+")",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:t},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]};if(this.constructor===X)this.normalizeRules();};(function(){this.embedTagRules=function(H,p,t){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+t+".tag-name.xml"],regex:"(<)("+t+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:p+"start"}]});this.$rules[t+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(v,c,s){s.splice(0);return this.token;}}];this.embedRules(H,p,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+t+".tag-name.xml"],regex:"(</)("+t+"(?=\\s|>|$))",next:t+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}]);};}).call(T.prototype);o.inherits(X,T);e.XmlHighlightRules=X;});ace.define("ace/mode/behaviour/xml",[],function(r,e,m){"use strict";var o=r("../../lib/oop");var B=r("../behaviour").Behaviour;var T=r("../../token_iterator").TokenIterator;var l=r("../../lib/lang");function i(t,a){return t&&t.type.lastIndexOf(a+".xml")>-1;}var X=function(){this.add("string_dquotes","insertion",function(s,a,b,c,t){if(t=='"'||t=="'"){var q=t;var d=c.doc.getTextRange(b.getSelectionRange());if(d!==""&&d!=="'"&&d!='"'&&b.getWrapBehavioursEnabled()){return{text:q+d+q,selection:false};}var f=b.getCursorPosition();var g=c.doc.getLine(f.row);var h=g.substring(f.column,f.column+1);var j=new T(c,f.row,f.column);var k=j.getCurrentToken();if(h==q&&(i(k,"attribute-value")||i(k,"string"))){return{text:"",selection:[1,1]};}if(!k)k=j.stepBackward();if(!k)return;while(i(k,"tag-whitespace")||i(k,"whitespace")){k=j.stepBackward();}var n=!h||h.match(/\s/);if(i(k,"attribute-equals")&&(n||h=='>')||(i(k,"decl-attribute-equals")&&(n||h=='?'))){return{text:q+q,selection:[1,1]};}}});this.add("string_dquotes","deletion",function(s,a,b,c,d){var f=c.doc.getTextRange(d);if(!d.isMultiLine()&&(f=='"'||f=="'")){var g=c.doc.getLine(d.start.row);var h=g.substring(d.start.column+1,d.start.column+2);if(h==f){d.end.column++;return d;}}});this.add("autoclosing","insertion",function(s,a,b,c,t){if(t=='>'){var p=b.getSelectionRange().start;var d=new T(c,p.row,p.column);var f=d.getCurrentToken()||d.stepBackward();if(!f||!(i(f,"tag-name")||i(f,"tag-whitespace")||i(f,"attribute-name")||i(f,"attribute-equals")||i(f,"attribute-value")))return;if(i(f,"reference.attribute-value"))return;if(i(f,"attribute-value")){var g=d.getCurrentTokenColumn()+f.value.length;if(p.column<g)return;if(p.column==g){var n=d.stepForward();if(n&&i(n,"attribute-value"))return;d.stepBackward();}}if(/^\s*>/.test(c.getLine(p.row).slice(p.column)))return;while(!i(f,"tag-name")){f=d.stepBackward();if(f.value=="<"){f=d.stepForward();break;}}var h=d.getCurrentTokenRow();var j=d.getCurrentTokenColumn();if(i(d.stepBackward(),"end-tag-open"))return;var k=f.value;if(h==p.row)k=k.substring(0,p.column-j);if(this.voidElements.hasOwnProperty(k.toLowerCase()))return;return{text:">"+"</"+k+">",selection:[1,1]};}});this.add("autoindent","insertion",function(s,a,b,c,t){if(t=="\n"){var d=b.getCursorPosition();var f=c.getLine(d.row);var g=new T(c,d.row,d.column);var h=g.getCurrentToken();if(h&&h.type.indexOf("tag-close")!==-1){if(h.value=="/>")return;while(h&&h.type.indexOf("tag-name")===-1){h=g.stepBackward();}if(!h){return;}var j=h.value;var k=g.getCurrentTokenRow();h=g.stepBackward();if(!h||h.type.indexOf("end-tag")!==-1){return;}if(this.voidElements&&!this.voidElements[j]){var n=c.getTokenAt(d.row,d.column+1);var f=c.getLine(k);var p=this.$getIndent(f);var q=p+c.getTabString();if(n&&n.value==="</"){return{text:"\n"+q+"\n"+p,selection:[1,q.length,1,q.length]};}else{return{text:"\n"+q};}}}}});};o.inherits(X,B);e.XmlBehaviour=X;});ace.define("ace/mode/folding/xml",[],function(r,e,m){"use strict";var o=r("../../lib/oop");var l=r("../../lib/lang");var R=r("../../range").Range;var B=r("./fold_mode").FoldMode;var T=r("../../token_iterator").TokenIterator;var F=e.FoldMode=function(v,c){B.call(this);this.voidElements=v||{};this.optionalEndTags=o.mixin({},this.voidElements);if(c)o.mixin(this.optionalEndTags,c);};o.inherits(F,B);var a=function(){this.tagName="";this.closing=false;this.selfClosing=false;this.start={row:0,column:0};this.end={row:0,column:0};};function b(t,c){return t.type.lastIndexOf(c+".xml")>-1;}(function(){this.getFoldWidget=function(s,f,c){var t=this._getFirstTagInLine(s,c);if(!t)return this.getCommentFoldWidget(s,c);if(t.closing||(!t.tagName&&t.selfClosing))return f=="markbeginend"?"end":"";if(!t.tagName||t.selfClosing||this.voidElements.hasOwnProperty(t.tagName.toLowerCase()))return"";if(this._findEndTagInLine(s,c,t.tagName,t.end.column))return"";return"start";};this.getCommentFoldWidget=function(s,c){if(/comment/.test(s.getState(c))&&/<!-/.test(s.getLine(c)))return"start";return"";};this._getFirstTagInLine=function(s,c){var t=s.getTokens(c);var d=new a();for(var i=0;i<t.length;i++){var f=t[i];if(b(f,"tag-open")){d.end.column=d.start.column+f.value.length;d.closing=b(f,"end-tag-open");f=t[++i];if(!f)return null;d.tagName=f.value;d.end.column+=f.value.length;for(i++;i<t.length;i++){f=t[i];d.end.column+=f.value.length;if(b(f,"tag-close")){d.selfClosing=f.value=='/>';break;}}return d;}else if(b(f,"tag-close")){d.selfClosing=f.value=='/>';return d;}d.start.column+=f.value.length;}return null;};this._findEndTagInLine=function(s,c,t,d){var f=s.getTokens(c);var g=0;for(var i=0;i<f.length;i++){var h=f[i];g+=h.value.length;if(g<d)continue;if(b(h,"end-tag-open")){h=f[i+1];if(h&&h.value==t)return true;}}return false;};this._readTagForward=function(i){var t=i.getCurrentToken();if(!t)return null;var c=new a();do{if(b(t,"tag-open")){c.closing=b(t,"end-tag-open");c.start.row=i.getCurrentTokenRow();c.start.column=i.getCurrentTokenColumn();}else if(b(t,"tag-name")){c.tagName=t.value;}else if(b(t,"tag-close")){c.selfClosing=t.value=="/>";c.end.row=i.getCurrentTokenRow();c.end.column=i.getCurrentTokenColumn()+t.value.length;i.stepForward();return c;}}while(t=i.stepForward());return null;};this._readTagBackward=function(i){var t=i.getCurrentToken();if(!t)return null;var c=new a();do{if(b(t,"tag-open")){c.closing=b(t,"end-tag-open");c.start.row=i.getCurrentTokenRow();c.start.column=i.getCurrentTokenColumn();i.stepBackward();return c;}else if(b(t,"tag-name")){c.tagName=t.value;}else if(b(t,"tag-close")){c.selfClosing=t.value=="/>";c.end.row=i.getCurrentTokenRow();c.end.column=i.getCurrentTokenColumn()+t.value.length;}}while(t=i.stepBackward());return null;};this._pop=function(s,t){while(s.length){var c=s[s.length-1];if(!t||c.tagName==t.tagName){return s.pop();}else if(this.optionalEndTags.hasOwnProperty(c.tagName)){s.pop();continue;}else{return null;}}};this.getFoldWidgetRange=function(s,f,c){var d=this._getFirstTagInLine(s,c);if(!d){return this.getCommentFoldWidget(s,c)&&s.getCommentFoldRange(c,s.getLine(c).length);}var i=d.closing||d.selfClosing;var g=[];var t;if(!i){var h=new T(s,c,d.start.column);var j={row:c,column:d.start.column+d.tagName.length+2};if(d.start.row==d.end.row)j.column=d.end.column;while(t=this._readTagForward(h)){if(t.selfClosing){if(!g.length){t.start.column+=t.tagName.length+2;t.end.column-=2;return R.fromPoints(t.start,t.end);}else continue;}if(t.closing){this._pop(g,t);if(g.length==0)return R.fromPoints(j,t.start);}else{g.push(t);}}}else{var h=new T(s,c,d.end.column);var k={row:c,column:d.start.column};while(t=this._readTagBackward(h)){if(t.selfClosing){if(!g.length){t.start.column+=t.tagName.length+2;t.end.column-=2;return R.fromPoints(t.start,t.end);}else continue;}if(!t.closing){this._pop(g,t);if(g.length==0){t.start.column+=t.tagName.length+2;if(t.start.row==t.end.row&&t.start.column<t.end.column)t.start.column=t.end.column;return R.fromPoints(t.start,k);}}else{g.push(t);}}}};}).call(F.prototype);});ace.define("ace/mode/xml",[],function(r,a,m){"use strict";var o=r("../lib/oop");var l=r("../lib/lang");var T=r("./text").Mode;var X=r("./xml_highlight_rules").XmlHighlightRules;var b=r("./behaviour/xml").XmlBehaviour;var c=r("./folding/xml").FoldMode;var W=r("../worker/worker_client").WorkerClient;var M=function(){this.HighlightRules=X;this.$behaviour=new b();this.foldingRules=new c();};o.inherits(M,T);(function(){this.voidElements=l.arrayToMap([]);this.blockComment={start:"<!--",end:"-->"};this.createWorker=function(s){var w=new W(["ace"],"ace/mode/xml_worker","Worker");w.attachToDocument(s.getDocument());w.on("error",function(e){s.setAnnotations(e.data);});w.on("terminate",function(){s.clearAnnotations();});return w;};this.$id="ace/mode/xml";}).call(M.prototype);a.Mode=M;});(function(){ace.require(["ace/mode/xml"],function(m){if(typeof module=="object"&&typeof exports=="object"&&module){module.exports=m;}});})();
